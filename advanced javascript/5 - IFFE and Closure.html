<!DOCTYPE html>
<html>
<head>
	<title>iFFE and closure</title>
	<meta charset="utf-8">
</head>
<body>
</body>

<script>
	/* IFFE is the inmediatly function expression, that means
	that after its read, its executed, and solve naming conflicts */

	/* Note: you can execute functions by puttin "()" at the final, that means
	the arguments, but its ok */

	cosnole.log('\n**** IFFE Testing ****');

	(function(){
		console.log('Hello');
	})();

	/* The functions is inemdiatly executed and the value of a
	comes from the return statement */

	var a = function(){
		console.log(5 * 10);
		return 'Hello';
	}();

	/* Closure: in my mind the closure was the access to a variable, its caused by a
	returned expression from a statement that was in the same or inner block, that
	gives to the returned expression the access to this variable */

	function calculate(num1){
		var num2 = 10;

		return function(num3){
			console.log(num1 + num2 + num3)
		}
	}

	/* Executes the calculate function and its return another function,
	when the returned function was declared it has acces to the num2 variable, so
	no matter where the function returned move, its ever has the closure access to 
	this variable */

	console.log('\n**** Closure Testing ****')

	add = calculate(5);
	add(10);

	function a(){
		var arr = [];

		for(var i = 0; i < 3; i++){
			if (iffe) {
				/* It inmediatly executes the function
				and log the actual value of i */

				arr.push(function(){
					console.log(i);
				}());
			} else {
				/* It executes later with closure, when its execute
				the loop was finished, and the variable i was update, 
				the closure give it acces to the variable, so it return
				3 every time */

				arr.push(function(){
					console.log(i);
				})
			}
		}

		return arr
	}

	a();

	b = a();

	b[0]();
	b[1]();
	b[2]();
</script>

</html>