<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>This part 2</title>
</head>
<body>

</body>
	<script type="text/javascript">
		console.log('\n**** "this" Testing ****');

		function a() {
			/* Note, in a function inside a object, the this word point
			to the object, like this: */

			console.log(this);
			console.log(this === window);
			/* Points to the window object */

			function b() {
				console.log(this);
				console.log(this === window);
				/* Points to the window object */
			}

			b()
		}

		a();

		var firstname = 'Bob';

		var per = {
			firstname: 'John',
			lastname: 'Smith',
			getfname: function() {
				/* we create that variable to save the object and use it
				later in other functions */
				var that = this;

				console.log('\n**** "this" points to per object or not ? ****');

				console.log(this === per);

				console.log('\n**** "this" points to the upper object of his property ****');

				console.log(this.firstname + ' ' + this.lastname);

				function greet() {
					/* if I put "this" here it will point to the upper function
					not to per object */

					console.log('Hi ' + that.firstname);
				}

				greet();
			}
		}

		var per1 = {
			firstname: 'Nick',
			lastname: 'Doe'
		}

		per1.getfname = per.getfname;

		per1.getfname();
		per.getfname();
	</script>
</html>